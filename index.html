<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rei do A√ßai - Card√°pio Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
        .bg-glow { background: radial-gradient(circle at center, #581c87 0%, #1e1b4b 100%); }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .glass-active { background: rgba(147, 51, 234, 0.2); border-color: rgba(168, 85, 247, 0.5); }
        
        /* Anima√ß√µes suaves */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }
    </style>
</head>
<body class="bg-glow min-h-screen text-white flex flex-col items-center pb-24 selection:bg-purple-500 selection:text-white">

    <main class="w-full max-w-md px-6 py-8 flex flex-col items-center flex-grow">
        
        <!-- ================= VISTA: HOME ================= -->
        <div id="home-view" class="view-section w-full flex flex-col items-center space-y-8 fade-in">
            <!-- Header / Logo -->
            <div class="relative group mt-4">
                <div class="absolute inset-0 bg-purple-500 blur-2xl opacity-20 rounded-full group-hover:opacity-30 transition-opacity duration-500"></div>
                <div class="relative p-1 bg-gradient-to-tr from-purple-400 to-fuchsia-600 rounded-full shadow-2xl">
                    <img src="WhatsApp Image 2026-02-09 at 14.28.35.jpeg" 
                         alt="Logo Rei do A√ßai" 
                         class="w-40 h-40 rounded-full object-cover border-4 border-purple-950 shadow-inner"
                         onerror="this.src='https://via.placeholder.com/160/4c1d95/ffffff?text=Rei+do+A√ßai'">
                </div>
            </div>

            <div class="text-center space-y-2">
                <h1 class="text-4xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-purple-200 to-fuchsia-400 drop-shadow-sm">
                    Rei do A√ßai
                </h1>
                <p class="text-purple-200/70 font-medium text-lg">O melhor sabor da regi√£o üëë</p>
            </div>

            <!-- Menu Principal -->
            <div class="w-full space-y-4 pt-8">
                <h2 class="text-xl font-semibold text-center mb-6">O que voc√™ vai pedir hoje?</h2>
                
                <button onclick="app.navigateTo('acai-view')" class="group w-full relative overflow-hidden rounded-2xl bg-gradient-to-r from-purple-600 to-purple-800 p-[2px] transition-transform active:scale-95 shadow-lg shadow-purple-900/30">
                    <div class="flex items-center justify-between bg-purple-900/90 rounded-[14px] px-6 py-5 transition-colors group-hover:bg-transparent">
                        <div class="flex flex-col items-start">
                            <span class="text-xl font-bold">A√ßa√≠</span>
                            <span class="text-xs text-purple-300 opacity-80">Monte do seu jeito</span>
                        </div>
                        <span class="text-3xl">üçß</span>
                    </div>
                </button>

                <button onclick="app.navigateTo('lanches-view')" class="group w-full relative overflow-hidden rounded-2xl bg-gradient-to-r from-pink-600 to-rose-700 p-[2px] transition-transform active:scale-95 shadow-lg shadow-pink-900/30">
                    <div class="flex items-center justify-between bg-purple-950/90 rounded-[14px] px-6 py-5 transition-colors group-hover:bg-transparent">
                        <div class="flex flex-col items-start">
                            <span class="text-xl font-bold">Lanches</span>
                            <span class="text-xs text-fuchsia-300 opacity-80">Artesanais e suculentos</span>
                        </div>
                        <span class="text-3xl">üçî</span>
                    </div>
                </button>
            </div>
        </div>

        <!-- ================= VISTA: A√áA√ç ================= -->
        <div id="acai-view" class="view-section hidden w-full flex-col space-y-6 fade-in">
            <div class="flex items-center gap-4 sticky top-0 bg-purple-900/0 backdrop-blur-sm py-4 z-10">
                <button onclick="app.navigateTo('home-view')" class="p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <h2 class="text-2xl font-bold italic text-purple-200">Tamanhos de A√ßa√≠</h2>
            </div>

            <div class="grid grid-cols-1 gap-4">
                <!-- Copo 300ml -->
                <div class="glass p-4 rounded-2xl flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-purple-800 rounded-xl flex items-center justify-center text-2xl shadow-lg">ü•§</div>
                        <div><h3 class="font-bold">Copo 300ml</h3><span class="text-green-400 font-bold block">R$ 8,00</span><br><span>2 complementos Gratis</span></div>
                    </div>
                    <button onclick="app.openComplements('A√ßa√≠ 300ml', 'acai', 8)" class="bg-purple-600 w-10 h-10 rounded-full hover:bg-purple-500 shadow-lg flex items-center justify-center font-bold text-xl transition-colors">+</button>
                </div>

                <!-- Copo 400ml -->
                <div class="glass p-4 rounded-2xl flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-purple-800 rounded-xl flex items-center justify-center text-2xl shadow-lg">ü•§</div>
                        <div><h3 class="font-bold">Copo 400ml</h3><span class="text-green-400 font-bold block">R$ 10,00</span><br><span>3 complementos Gratis</span></div>
                    </div>
                    <button onclick="app.openComplements('A√ßa√≠ 400ml', 'acai', 10)" class="bg-purple-600 w-10 h-10 rounded-full hover:bg-purple-500 shadow-lg flex items-center justify-center font-bold text-xl transition-colors">+</button>
                </div>

                <!-- Copo 500ml -->
                <div class="glass p-4 rounded-2xl flex items-center justify-between border border-purple-500/40 relative overflow-hidden">
                    <div class="absolute -right-8 -top-8 w-24 h-24 bg-purple-500/20 rounded-full blur-xl"></div>
                    <div class="flex items-center gap-4 relative z-10">
                        <div class="w-14 h-14 bg-purple-800 rounded-xl flex items-center justify-center text-2xl relative shadow-lg">
                            <span class="absolute -top-2 -right-2 bg-red-500 text-[9px] font-bold px-1.5 py-0.5 rounded-full animate-bounce shadow-sm">TOP</span>
                            ü•§
                        </div>
                        <div><h3 class="font-bold text-lg">Copo 500ml</h3><span class="text-green-400 font-bold block">R$ 12,00</span><br><span>4 complementos Gratis</span></span></div>
                    </div>
                    <button onclick="app.openComplements('A√ßa√≠ 500ml', 'acai', 12)" class="bg-purple-600 w-10 h-10 rounded-full hover:bg-purple-500 shadow-lg flex items-center justify-center font-bold text-xl transition-colors relative z-10">+</button>
                </div>

                <!-- Copo 700ml -->
                <div class="glass p-4 rounded-2xl flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-purple-800 rounded-xl flex items-center justify-center text-3xl shadow-lg">ü•§</div>
                        <div><h3 class="font-bold">Copo 700ml</h3><span class="text-green-400 font-bold block">R$ 24,00</span><br><span>4 complementos Gratis</span></div>
                    </div>
                    <button onclick="app.openComplements('A√ßa√≠ 700ml', 'acai', 24)" class="bg-purple-600 w-10 h-10 rounded-full hover:bg-purple-500 shadow-lg flex items-center justify-center font-bold text-xl transition-colors">+</button>
                </div>
            </div>
        </div>

        <!-- ================= VISTA: LANCHES ================= -->
        <div id="lanches-view" class="view-section hidden w-full flex-col space-y-6 fade-in">
            <div class="flex items-center gap-4 sticky top-0 bg-purple-900/0 backdrop-blur-sm py-4 z-10">
                <button onclick="app.navigateTo('home-view')" class="p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <h2 class="text-2xl font-bold italic text-pink-200">Nossos Lanches</h2>
            </div>

            <div class="grid grid-cols-1 gap-4">
                <div class="glass p-4 rounded-2xl flex items-center justify-between hover:border-pink-400 transition-colors">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-pink-900/50 rounded-xl flex items-center justify-center text-2xl">üå≠</div>
                        <div>
                            <h3 class="font-bold leading-tight">Cachorro-Quente</h3>
                            <span class="text-green-400 font-bold block mt-1">R$ 12,00</span>
                            <span class="text-gray-300 font-bold block mt-1 text-xs"> Salsicha, alface, maionese, molho, milho, ervilha e batata palha</span>
                        </div>
                    </div>
                    <button onclick="app.openComplements('Cachorro-Quente', 'lanche', 10)" class="bg-pink-600 w-10 h-10 rounded-full hover:bg-pink-500 flex items-center justify-center font-bold text-xl shadow-lg transition-colors">+</button>
                </div>

                <!-- NOVO ITEM ADICIONADO -->
                <div class="glass p-4 rounded-2xl flex items-center justify-between hover:border-pink-400 transition-colors">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-pink-900/50 rounded-xl flex items-center justify-center text-2xl">üå≠</div>
                        <div>
                            <h3 class="font-bold leading-tight">Cachorro-Quente<br><span class="text-yellow-400">Duplo</span></h3>
                            <span class="text-green-400 font-bold block mt-1">R$ 15,00</span>
                            <span class="text-gray-300 font-bold block mt-1 text-xs">2 Salsichas, alface, maionese, molho, milho, ervilha e batata palha</span>
                        </div>
                    </div>
                    <button onclick="app.openComplements('Cachorro-Quente Duplo', 'lanche', 15)" class="bg-pink-600 w-10 h-10 rounded-full hover:bg-pink-500 flex items-center justify-center font-bold text-xl shadow-lg transition-colors">+</button>
                </div>

                <div class="glass p-4 rounded-2xl flex items-center justify-between hover:border-pink-400 transition-colors">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-pink-900/50 rounded-xl flex items-center justify-center text-2xl">üçî</div>
                        <div>
                            <h3 class="font-bold leading-tight">X-Salada</h3>
                            <span class="text-green-400 font-bold block mt-1">R$ 16,00</span>
                            <span class="text-gray-300 font-bold block mt-1 text-xs">Bife, alface, tomate maionese, molho, ovo, milho, ervilha, presunto e queijo</span>
                        </div>
                    </div>
                    <button onclick="app.openComplements('X-Salada', 'lanche', 16)" class="bg-pink-600 w-10 h-10 rounded-full hover:bg-pink-500 flex items-center justify-center font-bold text-xl shadow-lg transition-colors">+</button>
                </div>

                <div class="glass p-4 rounded-2xl flex items-center justify-between hover:border-pink-400 transition-colors">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-pink-900/50 rounded-xl flex items-center justify-center text-2xl">üçî</div>
                        <div>
                            <h3 class="font-bold leading-tight">X-Calabresa</h3>
                            <span class="text-green-400 font-bold block mt-1">R$ 20,00</span>
                            <span class="text-gray-300 font-bold block mt-1 text-xs">Calabresa , alface, tomate, maionese, molho, ovo, milho, ervilha, presunto e queijo</span>
                        </div>
                    </div>
                    <button onclick="app.openComplements('X-Calabresa', 'lanche', 20)" class="bg-pink-600 w-10 h-10 rounded-full hover:bg-pink-500 flex items-center justify-center font-bold text-xl shadow-lg transition-colors relative z-10">+</button>
                </div>
            </div>
        </div>

        <!-- ================= VISTA: COMPLEMENTOS ================= -->
        <div id="complementos-view" class="view-section hidden w-full flex-col space-y-6 fade-in h-full">
            <div class="flex items-center gap-4">
                <button id="btn-back-complementos" class="p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <div>
                    <h2 id="complemento-title" class="text-2xl font-bold italic truncate max-w-[200px]">Personalizar</h2>
                    <p id="item-free-info" class="text-xs text-green-300 italic font-bold">Escolha seus favoritos</p>
                </div>
            </div>

            <div class="flex-grow space-y-4 overflow-y-auto pr-1">
                <h3 class="text-sm font-semibold uppercase tracking-wider text-purple-400 border-b border-purple-500/30 pb-2">Selecione os Adicionais:</h3>
                <div id="options-container" class="grid grid-cols-1 gap-3 pb-4">
                    <!-- Op√ß√µes geradas via JS -->
                </div>
            </div>

            <div class="pt-2 pb-6 mt-auto sticky bottom-0 bg-[#251e54] z-20">
                <button onclick="app.confirmOrder()" class="w-full bg-gradient-to-r from-green-500 to-emerald-700 py-4 rounded-2xl font-bold shadow-xl shadow-green-900/30 hover:scale-[1.02] active:scale-95 transition-all text-white flex items-center justify-center gap-2">
                    <span>Adicionar ao Pedido</span>
                    <span id="btn-total-preview" class="bg-black/20 px-2 py-0.5 rounded text-xs">R$ 0,00</span>
                </button>
            </div>
        </div>

        <!-- ================= VISTA: CARRINHO ================= -->
        <div id="cart-view" class="view-section hidden w-full flex-col space-y-6 pb-20 fade-in">
            <div class="flex items-center justify-between gap-4">
                <div class="flex items-center gap-4">
                    <button onclick="app.goBackFromCart()" class="p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                    </button>
                    <h2 class="text-2xl font-bold italic text-purple-200">Meu Pedido</h2>
                </div>
                <button onclick="app.clearCart()" class="text-xs text-red-400 hover:text-red-300 font-bold uppercase tracking-wider p-2">Limpar</button>
            </div>

            <div id="cart-items" class="space-y-4">
                <!-- Itens do carrinho -->
            </div>

            <div id="cart-empty-msg" class="hidden flex-col items-center justify-center py-12 opacity-60">
                <span class="text-4xl mb-3">üõí</span>
                <p>Seu carrinho est√° vazio.</p>
                <button onclick="app.navigateTo('home-view')" class="mt-4 text-purple-400 underline font-bold">Ver Card√°pio</button>
            </div>

            <!-- Op√ß√µes de Entrega -->
            <div id="delivery-section" class="pt-6 border-t border-white/10 space-y-5">
                <div class="space-y-3">
                    <h3 class="text-xs font-bold uppercase text-purple-400 tracking-widest flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        Forma de Entrega
                    </h3>
                    <div class="flex p-1 bg-black/20 rounded-xl">
                        <button onclick="app.setDeliveryMethod('entrega')" id="btn-delivery" class="flex-1 py-3 rounded-lg font-bold text-sm transition-all duration-300 bg-purple-600 shadow-lg">Tele-entrega</button>
                        <button onclick="app.setDeliveryMethod('retirada')" id="btn-pickup" class="flex-1 py-3 rounded-lg font-bold text-sm transition-all duration-300 text-white/50 hover:text-white">Retirada</button>
                    </div>
                </div>

                <!-- Info Tele-entrega -->
                <div id="info-delivery" class="space-y-2 fade-in">
                    <p class="text-xs text-green-300 flex items-center gap-1">
                        <span>‚è∞</span> Tempo estimado: 40 a 60 minutos
                    </p>
                    <label class="text-xs text-purple-300 ml-1 font-semibold">Endere√ßo de Entrega:</label>
                    <div class="relative">
                        <input type="text" id="user-address" placeholder="Rua, N√∫mero, Bairro e Refer√™ncia..." class="w-full bg-purple-900/30 border border-purple-500/30 rounded-xl px-4 py-4 text-sm focus:outline-none focus:border-purple-400 focus:bg-purple-900/50 transition-colors placeholder-purple-300/30">
                        <span class="absolute right-4 top-4 text-purple-400/50">üè†</span>
                    </div>
                </div>

                <!-- Info Retirada -->
                <div id="info-pickup" class="hidden space-y-3 fade-in bg-purple-500/10 p-4 rounded-xl border border-purple-500/20">
                    <div class="flex gap-3 items-start">
                        <span class="text-xl">üìç</span>
                        <div>
                            <h4 class="font-bold text-sm text-purple-200">Retirar em:</h4>
                            <p class="text-xs text-gray-300 leading-relaxed mt-1">
                                Av. General Daltro Filho 713<br>
                                Bairro: Hamburgo Velho
                            </p>
                        </div>
                    </div>
                    <div class="flex gap-3 items-center pt-2 border-t border-white/5">
                        <span class="text-lg">‚è±Ô∏è</span>
                        <p class="text-xs text-green-300 font-bold">
                            Pronto em: 20 a 40 minutos
                        </p>
                    </div>
                </div>
            </div>

            <!-- Total e Enviar -->
            <div id="cart-total-section" class="pt-6 border-t border-white/10 space-y-4">
                <div class="flex justify-between items-end text-xl font-bold bg-white/5 p-4 rounded-xl border border-white/5">
                    <span class="text-sm text-gray-300 mb-1">Total a pagar:</span>
                    <span id="cart-total" class="text-2xl text-green-400">R$ 0,00</span>
                </div>
                
                <button onclick="app.sendWhatsAppOrder()" class="w-full bg-[#25D366] hover:bg-[#20bd5a] py-4 rounded-2xl font-bold flex items-center justify-center gap-3 shadow-xl transition-all active:scale-[0.98] text-white">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                    <span>Enviar Pedido</span>
                </button>
            </div>
        </div>
        
    </main>

    <!-- BARRA FLUTUANTE INFERIOR -->
    <div id="cart-bottom-bar" class="fixed bottom-0 left-0 w-full p-4 transform translate-y-[120%] transition-transform duration-500 ease-out z-50">
        <button onclick="app.navigateTo('cart-view')" class="w-full max-w-md mx-auto bg-purple-600 hover:bg-purple-500 text-white flex items-center justify-between px-6 py-4 rounded-2xl shadow-2xl border border-purple-400/30 backdrop-blur-md">
            <div class="flex items-center gap-3">
                <div class="bg-purple-900/50 w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm" id="bar-count">0</div>
                <div class="flex flex-col items-start">
                    <span class="font-bold text-sm uppercase tracking-wide">Ver Carrinho</span>
                </div>
            </div>
            <span class="font-bold text-lg text-green-200" id="bar-total">R$ 0,00</span>
        </button>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="fixed top-6 left-1/2 transform -translate-x-1/2 bg-white text-purple-900 px-6 py-3 rounded-full shadow-2xl z-[60] flex items-center gap-2 transition-all duration-300 opacity-0 translate-y-[-20px] pointer-events-none font-semibold">
        <span>‚úÖ</span> <span id="toast-msg">Sucesso!</span>
    </div>

    <script>
        // L√≥gica Principal do Aplicativo
        const app = {
            // Estado
            state: {
                currentView: 'home-view',
                previousCategory: null,
                cart: [],
                deliveryMethod: 'entrega', // 'entrega' ou 'retirada'
                tempItem: null, // Item sendo personalizado
            },

            // Dados
            data: {
                complements: {
                    acai: [
                        { name: 'Morango', price: 3.00 }, { name: 'Abacaxi', price: 3.00 }, { name: 'Banana', price: 3.00 },
                        { name: 'Uva', price: 3.00 }, { name: 'Leite em p√≥', price: 3.00 }, { name: 'Leite Condensado', price: 3.00 },
                        { name: 'Granola', price: 3.00 }, { name: 'Pa√ßoca', price: 3.00 }, { name: 'Nutella', price: 5.00 },
                        { name: 'Oreo', price: 3.00 }, { name: 'Chocoball', price: 3.00 }, { name: 'Confete', price: 3.00 }
                    ],
                    lanche: [
                        { name: 'Maionese Caseira', price: 0 }
                    ]
                }
            },

            // Inicializa√ß√£o
            init: function() {
                this.updateCartUI();
            },

            // Navega√ß√£o
            navigateTo: function(viewId) {
                document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
                
                const target = document.getElementById(viewId);
                target.classList.remove('hidden');
                target.classList.add('fade-in'); 
                
                if (viewId === 'acai-view') this.state.previousCategory = 'acai-view';
                if (viewId === 'lanches-view') this.state.previousCategory = 'lanches-view';
                
                this.state.currentView = viewId;
                window.scrollTo({ top: 0, behavior: 'smooth' });
                this.toggleBottomBar(viewId !== 'cart-view' && viewId !== 'complementos-view');
            },

            goBackFromCart: function() {
                if (this.state.previousCategory) {
                    this.navigateTo(this.state.previousCategory);
                } else {
                    this.navigateTo('home-view');
                }
            },

            // L√≥gica de Complementos
            openComplements: function(name, type, basePrice) {
                // Definir limite baseado no tamanho
                let freeLimit = 0;
                if (type === 'acai') {
                    if (name.includes('300ml')) freeLimit = 2;
                    else if (name.includes('400ml')) freeLimit = 3;
                    else if (name.includes('500ml') || name.includes('700ml')) freeLimit = 4;
                }

                this.state.tempItem = {
                    id: Date.now(),
                    name: name,
                    type: type,
                    basePrice: basePrice,
                    freeLimit: freeLimit,
                    selectedComplements: []
                };

                document.getElementById('complemento-title').innerText = name;
                const infoText = freeLimit > 0 ? `(At√© ${freeLimit} op√ß√µes gr√°tis)` : 'Personalize seu pedido';
                document.getElementById('item-free-info').innerText = infoText;
                
                document.getElementById('btn-back-complementos').onclick = () => {
                    this.navigateTo(type === 'acai' ? 'acai-view' : 'lanches-view');
                };

                const container = document.getElementById('options-container');
                container.innerHTML = '';
                
                const options = this.data.complements[type] || [];
                
                options.forEach((opt, idx) => {
                    const div = document.createElement('div');
                    div.className = 'glass p-4 rounded-xl flex items-center justify-between cursor-pointer hover:bg-white/5 transition-all select-none';
                    
                    let priceText = '';
                    // Visualmente mostra o pre√ßo se existir, removendo o "Gr√°tis*" visual pedido
                    if (opt.price === 0) {
                        priceText = 'Gr√°tis';
                    } else {
                        priceText = '+ ' + this.formatMoney(opt.price);
                    }

                    div.innerHTML = `
                        <div class="flex items-center gap-3">
                            <div class="relative flex items-center justify-center">
                                <input type="checkbox" id="comp-${idx}" class="peer appearance-none w-5 h-5 border-2 border-purple-400 rounded checked:bg-purple-500 checked:border-purple-500 transition-colors">
                                <svg class="absolute w-3 h-3 text-white hidden peer-checked:block pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                            </div>
                            <span class="font-medium text-sm">${opt.name}</span>
                        </div>
                        <span class="text-xs font-bold ${priceText.includes('Gr√°tis') ? 'text-green-400' : 'text-purple-300'}">
                            ${priceText}
                        </span>
                    `;
                    
                    div.onclick = (e) => {
                        if (e.target.tagName !== 'INPUT') {
                            const checkbox = div.querySelector('input');
                            checkbox.checked = !checkbox.checked;
                        }
                        this.updateTempItemTotal();
                    };
                    
                    div.querySelector('input').dataset.name = opt.name;
                    div.querySelector('input').dataset.price = opt.price;
                    
                    container.appendChild(div);
                });

                // Footnote removido conforme pedido para limpar a interface visual

                this.updateTempItemTotal();
                this.navigateTo('complementos-view');
            },

            updateTempItemTotal: function() {
                const inputs = document.querySelectorAll('#options-container input:checked');
                let extra = 0;
                
                if (this.state.tempItem.type === 'acai' && this.state.tempItem.freeLimit > 0) {
                    const selected = [];
                    inputs.forEach(input => {
                        selected.push({
                            price: parseFloat(input.dataset.price),
                            name: input.dataset.name
                        });
                    });

                    const standardItems = selected.filter(i => i.price <= 3.00);
                    const premiumItems = selected.filter(i => i.price > 3.00);
                    
                    const freeCount = Math.min(standardItems.length, this.state.tempItem.freeLimit);
                    const paidStandardCount = Math.max(0, standardItems.length - this.state.tempItem.freeLimit);
                    
                    extra += paidStandardCount * 3.00; 
                    extra += premiumItems.reduce((sum, i) => sum + i.price, 0); 
                    
                } else {
                    inputs.forEach(input => {
                        extra += parseFloat(input.dataset.price);
                    });
                }

                const total = this.state.tempItem.basePrice + extra;
                document.getElementById('btn-total-preview').innerText = this.formatMoney(total);
            },

            confirmOrder: function() {
                const inputs = document.querySelectorAll('#options-container input:checked');
                const selectedNames = [];
                let extra = 0;
                
                 if (this.state.tempItem.type === 'acai' && this.state.tempItem.freeLimit > 0) {
                    const selected = [];
                    inputs.forEach(input => {
                        selected.push({ price: parseFloat(input.dataset.price), name: input.dataset.name });
                        selectedNames.push(input.dataset.name);
                    });

                    const standardItems = selected.filter(i => i.price <= 3.00);
                    const premiumItems = selected.filter(i => i.price > 3.00);
                    
                    const paidStandardCount = Math.max(0, standardItems.length - this.state.tempItem.freeLimit);
                    extra += paidStandardCount * 3.00;
                    extra += premiumItems.reduce((sum, i) => sum + i.price, 0);
                 } else {
                    inputs.forEach(input => {
                        selectedNames.push(input.dataset.name);
                        extra += parseFloat(input.dataset.price);
                    });
                 }

                this.state.cart.push({
                    ...this.state.tempItem,
                    extraPrice: extra,
                    totalPrice: this.state.tempItem.basePrice + extra,
                    complements: selectedNames
                });

                this.showToast('Item adicionado! üòã');
                this.updateCartUI();
                
                const returnView = this.state.tempItem.type === 'acai' ? 'acai-view' : 'lanches-view';
                this.navigateTo(returnView);
            },

            removeItem: function(id) {
                this.state.cart = this.state.cart.filter(item => item.id !== id);
                this.updateCartUI();
            },

            clearCart: function() {
                if(confirm('Tem certeza que deseja esvaziar o carrinho?')) {
                    this.state.cart = [];
                    this.updateCartUI();
                }
            },

            setDeliveryMethod: function(method) {
                this.state.deliveryMethod = method;
                const btnDelivery = document.getElementById('btn-delivery');
                const btnPickup = document.getElementById('btn-pickup');
                const infoDelivery = document.getElementById('info-delivery');
                const infoPickup = document.getElementById('info-pickup');

                if (method === 'entrega') {
                    btnDelivery.className = "flex-1 py-3 rounded-lg font-bold text-sm transition-all duration-300 bg-purple-600 shadow-lg text-white";
                    btnPickup.className = "flex-1 py-3 rounded-lg font-bold text-sm transition-all duration-300 text-white/50 hover:text-white";
                    infoDelivery.classList.remove('hidden');
                    infoPickup.classList.add('hidden');
                } else {
                    btnPickup.className = "flex-1 py-3 rounded-lg font-bold text-sm transition-all duration-300 bg-purple-600 shadow-lg text-white";
                    btnDelivery.className = "flex-1 py-3 rounded-lg font-bold text-sm transition-all duration-300 text-white/50 hover:text-white";
                    infoDelivery.classList.add('hidden');
                    infoPickup.classList.remove('hidden');
                }
            },

            updateCartUI: function() {
                const total = this.state.cart.reduce((acc, item) => acc + item.totalPrice, 0);
                const count = this.state.cart.length;

                document.getElementById('bar-count').innerText = count;
                document.getElementById('bar-total').innerText = this.formatMoney(total);
                
                const container = document.getElementById('cart-items');
                const emptyMsg = document.getElementById('cart-empty-msg');
                const actionsSection = document.getElementById('cart-total-section');
                const deliverySection = document.getElementById('delivery-section');

                container.innerHTML = '';

                if (count === 0) {
                    emptyMsg.classList.remove('hidden');
                    emptyMsg.classList.add('flex');
                    actionsSection.classList.add('hidden');
                    deliverySection.classList.add('hidden');
                } else {
                    emptyMsg.classList.add('hidden');
                    emptyMsg.classList.remove('flex');
                    actionsSection.classList.remove('hidden');
                    deliverySection.classList.remove('hidden');

                    this.state.cart.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'glass p-4 rounded-2xl flex justify-between items-start animate-fade-in';
                        div.innerHTML = `
                            <div class="flex-1 pr-2">
                                <h4 class="font-bold text-base text-purple-100">${item.name}</h4>
                                <p class="text-[11px] text-purple-200/60 mt-1 leading-relaxed">
                                    ${item.complements.length > 0 ? '+ ' + item.complements.join(', ') : 'Sem adicionais'}
                                </p>
                                <span class="text-green-400 font-bold text-sm block mt-2">${this.formatMoney(item.totalPrice)}</span>
                            </div>
                            <button onclick="app.removeItem(${item.id})" class="p-2 text-red-400/70 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors" aria-label="Remover item">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                            </button>
                        `;
                        container.appendChild(div);
                    });
                }
                
                document.getElementById('cart-total').innerText = this.formatMoney(total);
                this.toggleBottomBar(this.state.currentView !== 'cart-view' && this.state.currentView !== 'complementos-view' && count > 0);
            },

            toggleBottomBar: function(show) {
                const bar = document.getElementById('cart-bottom-bar');
                if (show && this.state.cart.length > 0) {
                    bar.classList.remove('translate-y-[120%]');
                } else {
                    bar.classList.add('translate-y-[120%]');
                }
            },

            formatMoney: function(value) {
                return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            },

            showToast: function(message) {
                const toast = document.getElementById('toast');
                document.getElementById('toast-msg').innerText = message;
                toast.classList.remove('opacity-0', 'translate-y-[-20px]');
                setTimeout(() => {
                    toast.classList.add('opacity-0', 'translate-y-[-20px]');
                }, 2500);
            },

            sendWhatsAppOrder: function() {
                if (this.state.cart.length === 0) return;

                const addressInput = document.getElementById('user-address');
                const address = addressInput.value.trim();

                if (this.state.deliveryMethod === 'entrega' && !address) {
                    this.showToast('Digite o endere√ßo! üè†');
                    addressInput.focus();
                    addressInput.classList.add('border-red-500');
                    setTimeout(() => addressInput.classList.remove('border-red-500'), 2000);
                    return;
                }

                let msg = `*üëë NOVO PEDIDO - REI DO A√áA√ç* üëë\n\n`;
                
                this.state.cart.forEach((item, i) => {
                    msg += `*${i+1}. ${item.name}*\n`;
                    if(item.complements.length > 0) msg += `   ‚îî _${item.complements.join(', ')}_\n`;
                    msg += `   üí∞ ${this.formatMoney(item.totalPrice)}\n\n`;
                });
                
                const total = this.state.cart.reduce((acc, item) => acc + item.totalPrice, 0);
                msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
                msg += `*TOTAL: ${this.formatMoney(total)}*\n`;
                msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n`;
                
                if (this.state.deliveryMethod === 'entrega') {
                    msg += `üõµ *ENTREGA (Delivery)*\n`;
                    msg += `üìç ${address}\n`;
                    msg += `‚è∞ Tempo estimado: 40-60 min\n`;
                } else {
                    msg += `üè™ *RETIRADA NO BALC√ÉO*\n`;
                    msg += `üìç Av. General Daltro Filho 713, Hamburgo Velho\n`;
                    msg += `‚è∞ Pronto em: 20-40 min\n`;
                }

                const whatsappNumber = "5181621572";
                const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(msg)}`;
                window.open(url, '_blank');
            }
        };

        app.init();
    </script>
</body>
</html>